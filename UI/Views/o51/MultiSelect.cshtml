@model TagsMultiSelect

@{
    ViewData["Title"] = "Oštítkovat";
    Layout = "~/Views/Shared/_LayoutSubform.cshtml";
}

@addTagHelper *, UI

    <div class="bg-light" style="padding:10px;">
        <button type="button" onclick="ok()" class="btn btn-success">OK</button>
        <button type="button" onclick="uncheckall()" class="btn btn-light">Odškrtnout vše</button>
        <button type="button" onclick="stitky_zoom_close()" class="btn btn-light">Zavřít</button>



    </div>

<mycheckboxlist asp-for="@Model.SelectedO51IDs" textfield="HtmlText" valuefield="pid" groupfield="o53Name" datasource="@Model.ApplicableTags"></mycheckboxlist>


<script type="text/javascript">
    function stitky_zoom_close(){
        window.parent.document.getElementById("zoom_okno").style.display = "none";
    }
    function ok() {
        var pids = document.getElementsByName("SelectedO51IDs");
        var selpids = [];
        var selnames = [];
        var selhtml = [];
        var s = "";
        for (var i = 0; i <= pids.length - 1; i++) {
            if (pids[i].value != "0") {
                selpids.push(pids[i].value);
                s = $("[for='chkSelectedO51IDs_" + pids[i].value + "']").text();
                selnames.push(s);
                s = $("[for='chkSelectedO51IDs_" + pids[i].value + "']").html();                
                selhtml.push(s);
            }

        }

             
        window.parent.document.getElementById("TagPids").value = selpids.join(",");
        window.parent.document.getElementById("TagNames").value = selnames.join(",");
        window.parent.document.getElementById("TagHtml").value = selhtml.join("");
        window.parent.document.getElementById("divTagHtml").innerHTML = selhtml.join("");
        stitky_zoom_close();
    }
    function uncheckall() {
        var pids = document.getElementsByName("SelectedO51IDs");
        
        for (var i = 0; i <= pids.length - 1; i++) {
            if (pids[i].value != "0") {                
                $("#chkSelectedO51IDs_" + pids[i].value).prop("checked", false);
                
                pids[i].value = "0";
            }
            
        }
    }
</script>
