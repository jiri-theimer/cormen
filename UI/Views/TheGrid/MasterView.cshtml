@model TheGridInstanceViewModel

@{
    ViewData["Title"] = "Grid";
    Layout = "~/Views/Shared/_Layout.cshtml";

    if (Model.entity == null)
    {
        return;
    }
   
}

@addTagHelper *,UI





<div id="splitter_container" class="splitter-container-top2bottom">

    <div id="splitter_panel1" class="splitter-panel-top">
        <vc:the-grid entity="@Model.entity" j72id="0" go2pid="@Model.go2pid" master_entity="" master_pid="0"></vc:the-grid>
    </div>

    <div id="splitter_resizer" class="splitter-resizer-top2bottom">
    </div>

    <div id="splitter_panel2" class="splitter-panel-bottom">

        <iframe id="fra_subgrid" name="fra_subgrid" frameborder="0" scrolling="no" width="100%" onload="$('#splitter_panel2').css('background','none');"></iframe>
    </div>
</div>

<div id="divContextMenuStatic" style="display:none;">
    <ul style="border:0px;">
        <li>
            <a href="javascript: _edit('@Model.prefix',#pid#)">Upravit/Odstranit/Archivovat</a>
        </li>
        <li>
            <a href="javascript: _clone('@Model.prefix',#pid#)">Kopírovat</a>
        </li>
        <li>
            <hr />
        </li>
        <li>
            <a href="javascript: _preview('@Model.prefix',#pid#)">Náhled</a>
        </li>
    </ul>
</div>

@section Scripts{

    <script type="text/javascript">

    $(document.body).css("overflow", "hidden");

    $(document).ready(function () {

        _splitter_init("1", "@Model.prefix");
        var defHeight = "500";

        _splitter_resize_after_init("1", defHeight);



        tg_adjust_for_screen("splitter_panel1");

        _mainmenu_select("@Model.prefix","grid11");


    });


     /*automaticky volaná událost z thegrid controlu*/
     function thegrid_handle_event(event_name, pid) {

        if (event_name == "rowselect") {
            document.getElementById("fra_subgrid").src = "/TheGrid/SlaveView?prefix=p10&master_entity=@Model.entity&master_pid=" + pid;
        }
     }



    </script>

}


